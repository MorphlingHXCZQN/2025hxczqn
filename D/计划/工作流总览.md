# 项目工作流总览（D:/计划）

## 目录结构
```
D/计划/
├── data/
│   ├── raw/
│   │   ├── pubmed/
│   │   └── google_scholar/
│   ├── pdfs/
│   │   ├── open_access/
│   │   └── restricted/
│   └── interim/
├── logs/
├── literature_review_template.md
├── research_plan_draft.md
├── 文献自动总结.md (示例)
├── 检索与爬虫方案.md
└── 工作流总览.md
```

## 工作流步骤
1. **关键词配置与任务启动**
   - 在 `configs/search.yml`（后续创建）中维护关键词、时间范围、数据库配置。
   - 执行 `python -m pipeline.run --config configs/search.yml` 启动批处理任务。
   - 若在 Windows 上需要直接落盘到 `D:\计划\`，请追加 `--output-root "D:/计划"` 参数。

2. **自动检索**
   - `pipeline/search.py` 根据配置生成 PubMed 与 Google Scholar 队列。
   - 请求状态与错误日志写入 `D/计划/logs/search_history.csv`、`pipeline.log`。

3. **数据抓取与存储**
   - `pipeline/pubmed.py` 输出 JSON 至 `D/计划/data/raw/pubmed/`。
   - `pipeline/google_scholar.py` 输出 JSON/CSV 至 `D/计划/data/raw/google_scholar/`。
   - `pipeline/downloader.py` 根据 DOI/PDF 链接抓取全文，并将合规文件保存到 `data/pdfs/`。

4. **数据清洗与去重**
   - `pipeline/normalize.py` 将原始数据标准化，输出至 `D/计划/data/interim/merged_metadata.parquet`。
   - 生成 `literature_summary.xlsx` 和 `references.bib` 供文献综述使用。

5. **文献总结与报告**
   - 结合 `literature_review_template.md` 填写单篇记录，必要时导出为 Word/PDF。
   - 使用 `文献自动总结.md` 或运行管线自动生成的 `文献自动总结.docx`（运行时创建，未纳入版本控制）归纳要点，供研究方案引用。
   - 更新 `research_plan_draft.md`，将纳入的文章作为前人研究支持，如需 Word 版可按需导出。

6. **研究设计迭代**
   - 根据总结结果制定细化的研究方案（样本量、模型、验证方式），存入 `research_plan_draft.md` 并按需导出 Word 版本。
   - 与数据团队核对 `D/计划/data/` 中可用的数据及缺口。

## 角色分工建议
- **数据工程师**：维护爬虫脚本、日志监控、数据清洗。
- **医学研究者**：审核检索结果、补充摘要、提炼临床指标。
- **算法工程师**：基于整理出的研究要点设计模型实验。
- **项目管理**：确保输出文档按要求归档至 `D/计划/`。

## 版本管理与备份
- 所有脚本与文档纳入 Git 仓库管理。
- 定期将 `D/计划/data/` 目录备份至安全存储（NAS/对象存储），并记录备份时间。
- 对 Word 文档开启版本历史（如使用 SharePoint/Overleaf），确保可追溯。

